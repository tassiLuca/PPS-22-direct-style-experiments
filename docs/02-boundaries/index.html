<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="boundary &amp; break # boundary &amp; break Modeling error handling data types with non-local breaks Optional Either &#43; ? boundary &amp; break mechanism provides a cleaner alternative to non-local returns:
boundary: is short for boundary.apply: the indented code below, passed as body, is a context function that is called within boundary.apply to break, an in-scope given instance of Label is required (i.e. is impossible to break without an enclosing boundary) Users don&rsquo;t define Label instances themselves.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="boundary &amp; break # boundary &amp; break Modeling error handling data types with non-local breaks Optional Either &#43; ? boundary &amp; break mechanism provides a cleaner alternative to non-local returns:
boundary: is short for boundary.apply: the indented code below, passed as body, is a context function that is called within boundary.apply to break, an in-scope given instance of Label is required (i.e. is impossible to break without an enclosing boundary) Users don&rsquo;t define Label instances themselves." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tassiluca.github.io/direct-style-experiments/docs/02-boundaries/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-03-09T16:35:50+01:00" />

<title>02 Boundaries | direct-style-experiments</title>
<link rel="manifest" href="/direct-style-experiments/manifest.json">
<link rel="icon" href="/direct-style-experiments/favicon.png" >
<link rel="canonical" href="https://tassiluca.github.io/direct-style-experiments/docs/02-boundaries/">
<link rel="stylesheet" href="/direct-style-experiments/book.min.42504dd4648e8da78376617fd32b73c3ae6afbe9f805c36868bc831b07002332.css" integrity="sha256-QlBN1GSOjaeDdmF/0ytzw65q&#43;&#43;n4BcNoaLyDGwcAIzI=" crossorigin="anonymous">
  <script defer src="/direct-style-experiments/flexsearch.min.js"></script>
  <script defer src="/direct-style-experiments/en.search.min.bf3e6c4047a74032e851536a446a84e22354d1e9cd8c7448337ec5431e8104e4.js" integrity="sha256-vz5sQEenQDLoUVNqRGqE4iNU0enNjHRIM37FQx6BBOQ=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/direct-style-experiments/"><span>direct-style-experiments</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/direct-style-experiments/docs/01-overview/" class="">01 Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/direct-style-experiments/docs/02-boundaries/" class="active">02 Boundaries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/direct-style-experiments/docs/03-basics/" class="">03 Basics</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/direct-style-experiments/docs/04-channels/" class="">04 Channels</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/direct-style-experiments/docs/05-rears/" class="">05 Rears</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/direct-style-experiments/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>02 Boundaries</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="boundary--break">
  <code>boundary</code> &amp; <code>break</code>
  <a class="anchor" href="#boundary--break">#</a>
</h1>
<ul>
<li><a href="#boundary--break"><code>boundary</code> &amp; <code>break</code></a>
<ul>
<li><a href="#modeling-error-handling-data-types-with-non-local-breaks">Modeling error handling data types with non-local breaks</a>
<ul>
<li><a href="#optional"><code>Optional</code></a></li>
<li><a href="#either--"><code>Either</code> + <code>?</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>boundary</code> &amp; <code>break</code> mechanism provides a cleaner alternative to non-local returns:</p>
<ul>
<li><code>boundary:</code> is short for <code>boundary.apply:</code></li>
<li>the indented code below, passed as <code>body</code>, is a context function that is called within <code>boundary.apply</code>
<ul>
<li>to <code>break</code>, an in-scope <code>given</code> instance of <code>Label</code> is required (i.e. is impossible to <code>break</code> without an enclosing <code>boundary</code>)</li>
<li>Users don&rsquo;t define <code>Label</code> instances themselves. Instead, this is done inside the implementation of <code>boundary.apply</code> to provide the capability of doing a non-local return [<a href="https://github.com/lampepfl/dotty/blob/3.3.0-RC4/library/src/scala/util/boundary.scala">Ref</a>]:
<div class="highlight"><pre tabindex="0" style="color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">// From the Scala 3 standard library
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic"></span><span style="color:#9ca0b0;font-style:italic">/** Run `body` with freshly generated label as implicit argument. 
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">  * Catch any breaks associated with that label and return their 
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">  * results instead of `body`&#39;s result.
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">  */</span>
</span></span><span style="display:flex;"><span>inline <span style="color:#8839ef">def</span> apply<span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">](</span>inline body<span style="color:#8839ef">:</span> <span style="color:#d20f39">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#04a5e5;font-weight:bold">?=&gt;</span> T<span style="color:#04a5e5;font-weight:bold">)</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">T</span> <span style="color:#04a5e5;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>  <span style="color:#8839ef">val</span> local <span style="color:#8839ef">=</span> <span style="color:#df8e1d">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">]()</span>
</span></span><span style="display:flex;"><span>  <span style="color:#8839ef">try</span> body<span style="color:#04a5e5;font-weight:bold">(</span>using local<span style="color:#04a5e5;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#8839ef">catch</span> <span style="color:#8839ef">case</span> ex<span style="color:#8839ef">:</span> <span style="color:#d20f39">Break</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#1e66f5;font-weight:bold">@unchecked</span> <span style="color:#8839ef">=&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8839ef">if</span> ex<span style="color:#04a5e5;font-weight:bold">.</span>label eq local then ex<span style="color:#04a5e5;font-weight:bold">.</span>value
</span></span><span style="display:flex;"><span>    <span style="color:#8839ef">else</span> <span style="color:#8839ef">throw</span> ex
</span></span></code></pre></div></li>
<li>non-local breaks are implemented as non-fatal exceptions: the implementation is optimized to suppress unnecessary stack traces (which makes exceptions very slow); stack traces are useless since the exceptions are managed rather than exposed to the user abruptly
<ul>
<li>enhanced performance is achieved when a break occurs within the same method, allowing it to be rewritten as a jump call to the enclosing scope within the same stack frame.</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote class="book-hint info">
  <code>boundary</code> and <code>break</code> can be particularly useful for <strong>error handling</strong> (later examples will show some use cases) and <strong>inner loops</strong> where we need a <strong>short exit path</strong>.
But, most importantly, they <strong>lay the foundations</strong> (along with a <strong><code>resume</code> mechanism</strong>) for building new <strong>direct-style concurrency abstractions</strong> based on <strong>suspensions</strong>.
</blockquote>

<h2 id="modeling-error-handling-data-types-with-non-local-breaks">
  Modeling error handling data types with non-local breaks
  <a class="anchor" href="#modeling-error-handling-data-types-with-non-local-breaks">#</a>
</h2>
<p>[<a href="https://github.com/tassiLuca/direct-style-experiments/tree/master/commons/src/main/scala/io/github/tassiLuca/dse/boundaries">Here you can find the full source</a>.]</p>
<p>In the following section are presented two data types that can be used to handle errors, both leveraging the <code>boundary</code> and <code>break</code> mechanism.
The first (<code>optional</code>) has been presented in the <a href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=direct&#43;style&#43;odersky&amp;ie=UTF-8&amp;oe=UTF-8">Scalar conference by M. Odersky</a>, while the second has been implemented to apply the same style also to <code>Either</code> data type.</p>
<h3 id="optional">
  <code>Optional</code>
  <a class="anchor" href="#optional">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">/** Represents a computation that will hopefully return 
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">  * [[Some]]thing or simply [[None]] if it can&#39;t. */</span>
</span></span><span style="display:flex;"><span><span style="color:#8839ef">object</span> <span style="color:#df8e1d">optional</span><span style="color:#8839ef">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#d20f39">/**</span> <span style="color:#d20f39">Defines</span> <span style="color:#d20f39">the</span> <span style="color:#d20f39">boundary</span> <span style="color:#d20f39">for</span> <span style="color:#d20f39">an</span> <span style="color:#04a5e5;font-weight:bold">[[</span><span style="color:#d20f39">Option</span><span style="color:#04a5e5;font-weight:bold">]]</span> returning computation<span style="color:#04a5e5;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#04a5e5;font-weight:bold">*</span> whose <span style="color:#04a5e5;font-weight:bold">[[</span><span style="color:#d20f39">body</span><span style="color:#04a5e5;font-weight:bold">]]</span> is given in input<span style="color:#04a5e5;font-weight:bold">.</span> <span style="color:#04a5e5;font-weight:bold">*/</span>
</span></span><span style="display:flex;"><span>  inline <span style="color:#8839ef">def</span> apply<span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">](</span>inline body<span style="color:#8839ef">:</span> <span style="color:#d20f39">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">None.</span><span style="color:#8839ef">type</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#04a5e5;font-weight:bold">?=&gt;</span> T<span style="color:#04a5e5;font-weight:bold">)</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">Option</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#8839ef">=</span>
</span></span><span style="display:flex;"><span>    boundary<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">Some</span><span style="color:#04a5e5;font-weight:bold">(</span>body<span style="color:#04a5e5;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  extension <span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">](</span>o<span style="color:#8839ef">:</span> <span style="color:#d20f39">Option</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">T</span><span style="color:#04a5e5;font-weight:bold">])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9ca0b0;font-style:italic">/** @return the enclosed [[Option]] object if defined, or break 
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">      * to the enclosing boundary with [[None]]. */</span>
</span></span><span style="display:flex;"><span>    inline <span style="color:#8839ef">def</span> <span style="color:#04a5e5;font-weight:bold">?(</span>using label<span style="color:#8839ef">:</span> <span style="color:#d20f39">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">None.</span><span style="color:#8839ef">type</span><span style="color:#04a5e5;font-weight:bold">])</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">T</span> <span style="color:#04a5e5;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>      o<span style="color:#04a5e5;font-weight:bold">.</span>getOrElse<span style="color:#04a5e5;font-weight:bold">(</span>break<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">None</span><span style="color:#04a5e5;font-weight:bold">))</span>
</span></span></code></pre></div><h3 id="either--">
  <code>Either</code> + <code>?</code>
  <a class="anchor" href="#either--">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">/** Represents a computation that will hopefully return a [[Right]] value but might fail with a [[Left]] one.*/</span>
</span></span><span style="display:flex;"><span><span style="color:#8839ef">object</span> <span style="color:#df8e1d">either</span><span style="color:#8839ef">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#d20f39">/**</span> <span style="color:#d20f39">Defines</span> <span style="color:#d20f39">the</span> <span style="color:#d20f39">boundary</span> <span style="color:#d20f39">for</span> <span style="color:#d20f39">the</span> <span style="color:#04a5e5;font-weight:bold">[[</span><span style="color:#d20f39">Either</span><span style="color:#04a5e5;font-weight:bold">]]</span> returning computation<span style="color:#04a5e5;font-weight:bold">,</span> whose <span style="color:#04a5e5;font-weight:bold">[[</span><span style="color:#d20f39">body</span><span style="color:#04a5e5;font-weight:bold">]]</span> is given in input<span style="color:#04a5e5;font-weight:bold">.</span> <span style="color:#04a5e5;font-weight:bold">*/</span>
</span></span><span style="display:flex;"><span>  inline <span style="color:#8839ef">def</span> apply<span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">](</span>inline body<span style="color:#8839ef">:</span> <span style="color:#d20f39">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Left</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">Nothing</span><span style="color:#04a5e5;font-weight:bold">]]</span> <span style="color:#04a5e5;font-weight:bold">?=&gt;</span> R<span style="color:#04a5e5;font-weight:bold">)</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">Either</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#8839ef">=</span>
</span></span><span style="display:flex;"><span>    boundary<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">Right</span><span style="color:#04a5e5;font-weight:bold">(</span>body<span style="color:#04a5e5;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#9ca0b0;font-style:italic">/** Quickly break to the enclosing boundary with a [[Left]] filled with [[l]]. */</span>
</span></span><span style="display:flex;"><span>  inline <span style="color:#8839ef">def</span> left<span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">](</span>l<span style="color:#8839ef">:</span> <span style="color:#d20f39">L</span><span style="color:#04a5e5;font-weight:bold">)(</span>using <span style="color:#df8e1d">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Left</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">Nothing</span><span style="color:#04a5e5;font-weight:bold">]])</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">Either</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#8839ef">=</span> break<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">Left</span><span style="color:#04a5e5;font-weight:bold">(</span>l<span style="color:#04a5e5;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  extension <span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">](</span>e<span style="color:#8839ef">:</span> <span style="color:#d20f39">Either</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9ca0b0;font-style:italic">/** @return this [[Right]] value or break to the enclosing boundary with the [[Left]] value. */</span>
</span></span><span style="display:flex;"><span>    inline <span style="color:#8839ef">def</span> <span style="color:#04a5e5;font-weight:bold">?(</span>using <span style="color:#df8e1d">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Left</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">Nothing</span><span style="color:#04a5e5;font-weight:bold">]])</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">R</span> <span style="color:#04a5e5;font-weight:bold">=</span> e <span style="color:#8839ef">match</span>
</span></span><span style="display:flex;"><span>      <span style="color:#8839ef">case</span> <span style="color:#df8e1d">Right</span><span style="color:#04a5e5;font-weight:bold">(</span>value<span style="color:#04a5e5;font-weight:bold">)</span> <span style="color:#8839ef">=&gt;</span> value
</span></span><span style="display:flex;"><span>      <span style="color:#8839ef">case</span> <span style="color:#df8e1d">Left</span><span style="color:#04a5e5;font-weight:bold">(</span>value<span style="color:#04a5e5;font-weight:bold">)</span> <span style="color:#8839ef">=&gt;</span> break<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">Left</span><span style="color:#04a5e5;font-weight:bold">(</span>value<span style="color:#04a5e5;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  extension <span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">](</span>t<span style="color:#8839ef">:</span> <span style="color:#d20f39">Try</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">R</span><span style="color:#04a5e5;font-weight:bold">])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9ca0b0;font-style:italic">/** @return this [[Success]] value or break to the enclosing boundary with a [[Left]] containing 
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">      *         the converted `Throwable` exception performed by the implicit [[converter]].
</span></span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">      */</span>
</span></span><span style="display:flex;"><span>    inline <span style="color:#8839ef">def</span> <span style="color:#04a5e5;font-weight:bold">?[</span><span style="color:#d20f39">L</span><span style="color:#04a5e5;font-weight:bold">](</span>using <span style="color:#df8e1d">Label</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Left</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">L</span>, <span style="color:#d20f39">Nothing</span><span style="color:#04a5e5;font-weight:bold">]])(</span>using converter<span style="color:#8839ef">:</span> <span style="color:#d20f39">Conversion</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Throwable</span>, <span style="color:#d20f39">L</span><span style="color:#04a5e5;font-weight:bold">])</span><span style="color:#8839ef">:</span> <span style="color:#d20f39">R</span> <span style="color:#04a5e5;font-weight:bold">=</span> 
</span></span><span style="display:flex;"><span>      t <span style="color:#8839ef">match</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8839ef">case</span> <span style="color:#df8e1d">Success</span><span style="color:#04a5e5;font-weight:bold">(</span>value<span style="color:#04a5e5;font-weight:bold">)</span> <span style="color:#8839ef">=&gt;</span> value
</span></span><span style="display:flex;"><span>        <span style="color:#8839ef">case</span> <span style="color:#df8e1d">Failure</span><span style="color:#04a5e5;font-weight:bold">(</span>exception<span style="color:#04a5e5;font-weight:bold">)</span> <span style="color:#8839ef">=&gt;</span> break<span style="color:#04a5e5;font-weight:bold">(</span><span style="color:#df8e1d">Left</span><span style="color:#04a5e5;font-weight:bold">(</span>converter<span style="color:#04a5e5;font-weight:bold">(</span>exception<span style="color:#04a5e5;font-weight:bold">)))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#9ca0b0;font-style:italic">/** An object encapsulating a collection of `Throwable` given converters. */</span>
</span></span><span style="display:flex;"><span><span style="color:#8839ef">object</span> <span style="color:#df8e1d">EitherConversions</span><span style="color:#8839ef">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#d20f39">/**</span> <span style="color:#d20f39">Converts</span> <span style="color:#d20f39">a</span> <span style="color:#d20f39">`Throwable`</span> <span style="color:#d20f39">to</span> <span style="color:#d20f39">a</span> <span style="color:#d20f39">`String`</span> <span style="color:#d20f39">with</span> <span style="color:#d20f39">its</span> <span style="color:#d20f39">message.</span> <span style="color:#d20f39">*/</span>
</span></span><span style="display:flex;"><span>  given <span style="color:#df8e1d">Conversion</span><span style="color:#04a5e5;font-weight:bold">[</span><span style="color:#d20f39">Throwable</span>, <span style="color:#d20f39">String</span><span style="color:#04a5e5;font-weight:bold">]</span> <span style="color:#8839ef">=</span> <span style="color:#8839ef">_</span><span style="color:#04a5e5;font-weight:bold">.</span>getMessage
</span></span></code></pre></div><p>This kind of data type will be particularly useful in the next examples to quickly break in case of failures, returning the caller a meaningful error message, and simplifying the error-handling code.</p>




  

<a  href="/direct-style-experiments/docs/01-overview/"   class="book-btn">
  <strong>Overview</strong>
</a>





  

<a  href="/direct-style-experiments/docs/03-basics/"   class="book-btn">
  <strong>Next</strong>: Basic asynchronous constructs
</a>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/tassiLuca/direct-style-experiments/commit/e79da73a556584040d0795f3da947e337040ae33" title='Last modified by Luca Tassinari | March 9, 2024' target="_blank" rel="noopener">
      <img src="/direct-style-experiments/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>March 9, 2024</span>
    </a>
  </div>




</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>
</html>












